"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.reverseSegment = void 0;
const is_list_1 = require("./is-list");
const is_optional_1 = require("./is-optional");
const constants_1 = require("./constants");
/**
 * Reverse-parse a segment.
 */
function reverseSegment(str, dict) {
    // eslint-disable-next-line no-undef
    const match = str.match(constants_1.namedParamRegex) || [];
    for (let i = 0; i < match.length; i++) {
        const m = match[i];
        const endIx = m.indexOf('<');
        let name = m.slice(1, endIx < 0 ? m.length : endIx);
        if ((0, is_optional_1.isOptional)(name) || (0, is_list_1.isList)(name)) {
            name = name.slice(0, -1);
        }
        if (!(name in dict)) {
            throw new Error(`${name} ${undefined}`);
        }
        // eslint-disable-next-line no-param-reassign
        str = str.replace(m, dict[name]);
    }
    return str;
}
exports.reverseSegment = reverseSegment;
//# sourceMappingURL=reverse-segment.js.map