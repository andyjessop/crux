"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseSegment = void 0;
/**
 * Parse a segment, returning a decodeURL function.
 */
function parseSegment(seg) {
    if (seg[0] === ':') {
        let regex = null;
        const ndx = seg.indexOf('<');
        let name = seg.slice(1, seg.length);
        if (ndx >= 0) {
            if (seg[seg.length - 1] !== '>') {
                throw new Error('No closing >');
            }
            const regexStr = seg.slice(ndx + 1, seg.length - 1);
            regex = new RegExp(`^(${regexStr})$`);
            name = seg.slice(1, ndx);
        }
        return function curriedParseSegment(str, paths, array = false) {
            if (array) {
                paths[name] = [].concat(paths[name] || [], str);
            }
            else {
                paths[name] = str;
            }
            return !(regex && !regex.test(str));
        };
    }
    else {
        return function curriedParseSegment(str) {
            return str === seg;
        };
    }
}
exports.parseSegment = parseSegment;
//# sourceMappingURL=parse-segment.js.map