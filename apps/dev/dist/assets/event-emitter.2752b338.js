function a(){const o=[];return{emit:r,on:l,onAll:f,once:p,off:c,offAll:u};function l(t,e){const n={handler:e,type:t};o.push(n)}function f(t){const e={handler:t,type:"all"};o.push(e)}function r(t,e){let n;const i=[];for(n of o){if(n.type!==t&&n.type!=="all")continue;const s=n.handler(e);s!=null&&s.then&&i.push(s)}return Promise.all(i)}function c(t,e){const n=o.findIndex(i=>t===i.type&&e===i.handler);n!==-1&&o.splice(n,1)}function u(t){const e=o.findIndex(n=>n.type==="all"&&t===n.handler);e!==-1&&o.splice(e,1)}function p(t,e){const n={handler:(...i)=>{c(t,e),e(...i)},type:t};o.push(n)}}export{a as c};
