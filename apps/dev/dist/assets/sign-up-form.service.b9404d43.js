import{c as u}from"./event-emitter.2752b338.js";function i(e,a){let t;return(...n)=>{clearTimeout(t),t=setTimeout(()=>{e(...n)},a)}}async function c(e,a){const t=[];for(const s of a){const r=s(e);r.then?t.push(r):t.push(Promise.resolve(r))}const n=await Promise.all(t);return{errors:n.filter(s=>s&&!s.success).map(s=>s.message),messages:n.filter(s=>s&&s.success).map(s=>s.message)}}const m=[e=>/^\S+@\S+\.\S+$/.test(e)?{message:"Passes regex",success:!0}:{message:"Not a valid email address",success:!1},e=>new Promise(a=>{setTimeout(()=>{a({message:"Email address not taken",success:!0})})})],l=[e=>/(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})/.test(e)?{message:"strong",success:!0}:/((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{6,}))|((?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])(?=.{8,}))/.test(e)?{message:"medium",success:!0}:{message:"weak",success:!0}];function g(){const e=u();return{...e,onCancel:a,onChangePassword:t,onChangeEmail:n};async function a(){e.emit("reset",null)}async function t(s){e.emit("update",{password:{isPristine:!1,value:s}}),i(async()=>{const{messages:r}=await c(s,l);e.emit("update",{password:{successMessage:r[0]}})},250)()}async function n(s){e.emit("update",{email:{isPristine:!1,value:s}}),i(async()=>{const{errors:r,messages:o}=await c(s,m);e.emit("update",{email:{errorMessages:r,successMessage:o[0]}})},250)()}}export{g as signupForm};
