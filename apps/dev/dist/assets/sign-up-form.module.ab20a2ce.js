import{c,m as n,_ as u}from"./index.791a460c.js";function m(t,r){let e;return(...a)=>{clearTimeout(e),e=setTimeout(()=>{t(...a)},r)}}async function l(t,r){const e=[];for(const s of r){const o=s(t);o.then?e.push(o):e.push(Promise.resolve(o))}const a=await Promise.all(e);return{errors:a.filter(s=>s&&!s.success).map(s=>s.message),messages:a.filter(s=>s&&s.success).map(s=>s.message)}}const g=[t=>/^\S+@\S+\.\S+$/.test(t)?{message:"Passes regex",success:!0}:{message:"Not a valid email address",success:!1},t=>new Promise(r=>{setTimeout(()=>{r({message:"Email address not taken",success:!0})})})],d=[t=>/(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})/.test(t)?{message:"strong",success:!0}:/((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{6,}))|((?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])(?=.{8,}))/.test(t)?{message:"medium",success:!0}:{message:"weak",success:!0}],p={email:g,password:d},i={email:{errors:[],isPristine:!0,name:"email",placeholder:"Your email address",messages:null,value:null},formState:"idle",password:{errors:[],isPristine:!0,name:"password",placeholder:"Your email address",messages:null,value:null}};function f(t,r){return c()(r,i,{onChange:(e,{field:a,value:s})=>async({api:o})=>S(o,{field:a,value:s}),close:e=>async({api:a})=>{a.reset(),t.cancelSignup()},onSubmit:(e,{email:a,password:s})=>async({api:o})=>w(o,t,{email:a,password:s}),reset:()=>i,setFormState:(e,a)=>n(e,{formState:a}),setValue:(e,{field:a,value:s})=>n(e,{[a]:{isPristine:!1,value:s}}),setMessages:(e,{errors:a,field:s,messages:o})=>n(e,{[s]:{errors:a,messages:o}})})}function S(t,{field:r,value:e}){t.setValue({field:r,value:e}),m(async()=>{const{errors:a,messages:s}=await l(e,p[r]);t.setMessages({field:r,errors:a,messages:s})},250)()}async function w(t,r,{email:e,password:a}){t.setFormState("submitting"),await r.submitSignupForm({email:e,password:a}),t.close()}function v(t){return t.signupForm}async function P(t){const{actions:r,api:e,middleware:a,reducer:s}=f(t,"signupForm");return{actions:r,middleware:a,reducer:s,services:{api:{factory:()=>Promise.resolve(()=>e)}},views:{signupForm:{selectActions:()=>e,selectData:v,factory:()=>u(()=>import("./sign-up-form.view.ccb42b9b.js"),["assets/sign-up-form.view.ccb42b9b.js","assets/lit-html.9b9017eb.js","assets/map.a4f06f37.js","assets/ref.7a167248.js","assets/directive.9b57a945.js"]).then(o=>o.createSignupFormView),root:"sign-up-form"}}}}export{P as createSignupFormModule};
