import{a as d}from"./index.791a460c.js";function y(e,u){const{emitter:n=d(),initialState:o}=u,i=d();let t=o;const E=b(e,O),a=k(e,i);return{...E,getState:c,...a,onEnter:m,onExit:x,transition:O};function c(){return t}function m(r){return n.on(s.OnEnter,r),function(){n.off(s.OnEnter,r)}}function x(r){return n.on(s.OnExit,r),function(){n.off(s.OnExit,r)}}async function O(r,...f){await n.emit(s.OnExit,{action:r,current:t,meta:f});const l=t;if(!!e[t][r])return t=await e[t][r](f),await n.emit(s.OnEnter,{action:r,current:t,last:l,meta:f}),await i.emit(t,{action:r,current:t,last:l,meta:f}),t}}function b(e,u){return Array.from(Object.values(e).reduce((n,o)=>(Object.keys(o).forEach(i=>n.add(i)),n),new Set)).reduce((n,o)=>(n[o]=function(...t){return u(o,...t)},n),{})}function k(e,u){return Object.keys(e).reduce((o,i)=>{const t=i.slice(0,1),E=i.slice(1).split(""),a=`on${t.toUpperCase()}${E.join("")}`;return o[a]=c=>(u.on(i,c),()=>u.off(i,c)),o},{})}var s=(e=>(e.OnEnter="onEnter",e.OnExit="onExit",e))(s||{});export{y as m};
