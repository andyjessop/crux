import{c}from"./event-emitter.2752b338.js";function n(s,r){let a;return(...t)=>{clearTimeout(a),a=setTimeout(()=>{s(...t)},r)}}async function o(s,r){const a=[];for(const e of r){const i=e(s);i.then?a.push(i):a.push(Promise.resolve(i))}const t=await Promise.all(a);return{errors:t.filter(e=>e&&!e.success).map(e=>e.message),messages:t.filter(e=>e&&e.success).map(e=>e.message)}}const u=[s=>/^\S+@\S+\.\S+$/.test(s)?{message:"Passes regex",success:!0}:{message:"Not a valid email address",success:!1},s=>new Promise(r=>{setTimeout(()=>{r({message:"Email address not taken",success:!0})})})],m=[s=>/(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})/.test(s)?{message:"strong",success:!0}:/((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{6,}))|((?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])(?=.{8,}))/.test(s)?{message:"medium",success:!0}:{message:"weak",success:!0}];function d(){const s=c();return{...s,onChangePassword:r,onChangeEmail:a};async function r(t){s.emit("update",{password:{isPristine:!1,value:t}}),n(async()=>{const{messages:e}=await o(t,m);s.emit("update",{password:{successMessage:e[0]}})},250)()}async function a(t){s.emit("update",{email:{isPristine:!1},emailValue:t}),n(async()=>{const{errors:e,messages:i}=await o(t,u);s.emit("update",{email:{errorMessages:e,successMessage:i[0]}})},250)()}}export{d as signupForm};
